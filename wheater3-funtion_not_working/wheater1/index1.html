<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="js/jquery.ajax.3.5.1.min.js"></script>
    <link rel="stylesheet" href="css/css.css">
    <link rel="stylesheet" href="css/weather-icons.css">
    
</head>
<body>
    <div id="weather_info">
        <h1 class="city"></h1>
        <h2 class="today"></h2>
        <i class="icon"></i>
        <p class="temp"></p>
        <div class="bar"></div>
        
        <div class="container">
            <div class="cont cont1">
                <i class="wi wi-sunrise font-s"></i>
                <p>SUNRISE</p>
                <div class="sunrise"></div>

            </div>
            <div class="cont cont2">
                <i class="wi wi-strong-wind" id="wi-strong-wind"></i>
                <p>WIND</p>
                <div class="wind"></div>
            </div>
            <div class="cont cont3">
                <i class="wi wi-thermometer-exterior"></i>
                <p>MIN-THEM</p>
                <div class="min-theme"></div>
            </div>
        </div>

        <!-- <section>
            <p class="w_id"></p>
            
           
            <aside>
                <p class="temp_max">max</p>
                <p class="temp_min">min</p>
            </aside>
        </section> -->
        <img class="load_img" src="sehun3.png" width="50">
    </div>

    <script>
        var url="http://api.openweathermap.org/data/2.5/weather?q=Seoul&appid=5b025c8ff79f6784133c1fb245c163c4"

        $('weather_info .load_img').show();

        $.getJSON(url, function(data) {
            var sys = data.sys;  // 국가명, 일출/일몰
            var sunrise = sys.sunrise;
            var sun_up = new Date(sunrise*1000);
            var cal=sun_up.toLocaleTimeString();
            var cal_sunrise = "AM" + cal.substr(2,5);
            //일출          
            var wind = data.wind;  
            var wind_1 = wind.speed;
            var cal_wind = Math.floor(wind_1)+"m/s";
            // var windColl=;             //바람
            var city = data.name;               // 도시명
            var weather = data.weather;         // 날씨 객체
            var main = data.main;               // 온도 기압 관련 객체
            var wmain = weather[0].main;        // 구름 상태(Cloudiness)
            var w_id = weather[0].id;           // 날씨상태 id 코드
            var icon = weather[0].icon;         // 날씨 아이콘 정보
            var country = sys.country;          // 국가명
            var temp = main.temp;               // 현재 온도
            var temp_min = main.temp_min;       // 최저 온도
            var temp_max = main.temp_max;       // 최고 온도
            var today = new Date();
            var year = today.getFullYear(); 
            var month = today.getMonth() + 1; 
            var date = today.getDate(); 
            var day = today.getDay(); 
            var allDay = 'Today ' + year + '.' + month + '.' + date;
            var icon_url = 'http://openweathermap.org/img/w/' + icon;
            


            var nowTimestamp = Math.floor(Date.now() / 1000);
                        var weatherClass = 'wi wi-owm-';
                        weatherClass += (nowTimestamp >= data.sunrise && nowTimestamp <= data.sunset ? 'day' : 'night');
                        weatherClass += ('-' + weather[0].id);

                        $("#weather_info .icon").addClass(weatherClass);

                        $('#weather_info>.city').html(city);
                        $('#weather_info .w_id').html(wmain);
                        $('#weather_info .min-theme').html(parseInt(temp_min-273.15)+'&deg' );
                        $('#weather_info .temp').html(parseInt(temp-273.15)+'&deg;'+'C');
                        $('#weather_info .load_img').hide();
                        $('#weather_info .today').html(allDay);
                        $('#weather_info .sunrise').html(cal_sunrise);
                        $('#weather_info .wind').html(cal_wind);
            
        
        })
        .fail(function(){
            alert("loading error");
        });


        
    </script>
</body>
</html>